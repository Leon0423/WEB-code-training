<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>FTC Motors Code</title>
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
		/>
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.27.0/themes/prism.min.css"
		/>
		<style>
			body {
				display: flex;
				margin: 0;
				font-family: Arial, sans-serif;
				transition: background-color 0.3s, color 0.3s;
			}

			.sidebar {
				position: fixed;
				top: 0;
				left: 0;
				width: 200px;
				height: 100%;
				background-color: #333;
				color: white;
				padding-top: 20px;
				transition: background-color 0.3s, left 0.3s;
			}

			.sidebar a {
				display: block;
				color: white;
				padding: 10px;
				text-decoration: none;
				transition: background-color 0.3s;
			}

			.sidebar a:hover {
				background-color: #575757;
			}

			.content {
				margin-left: 200px;
				padding: 20px;
				width: calc(100% - 200px);
				transition: margin-left 0.3s, width 0.3s;
			}

			.dark-mode {
				background-color: #121212;
				color: white;
			}

			.dark-mode .sidebar {
				background-color: #1e1e1e;
			}

			.dark-mode .sidebar a {
				color: #bbb;
			}

			.dark-mode .sidebar a:hover {
				background-color: #333;
			}

			.toggle-button {
				position: fixed;
				top: 10px;
				right: 10px;
				padding: 10px;
				background-color: #333;
				color: white;
				border: none;
				cursor: pointer;
				transition: background-color 0.3s;
				z-index: 1000;
			}

			.toggle-button:hover {
				background-color: #575757;
			}

			.code-block {
				position: relative;
				margin-top: 10px;
			}

			.copy-button {
				position: absolute;
				top: 10px;
				right: 10px;
				padding: 5px;
				background-color: transparent;
				color: #333;
				border: none;
				cursor: pointer;
				transition: color 0.3s, transform 0.2s;
				z-index: 1;
			}

			.dark-mode .copy-button {
				color: white;
			}

			.copy-button i {
				font-size: 1.2em;
			}

			.copy-button:hover {
				color: #4caf50;
			}

			.copy-button:active {
				transform: scale(0.9);
			}

			.copy-button[title]:hover::after {
				content: attr(title);
				position: absolute;
				top: -25px;
				right: 0;
				background: #333;
				color: white;
				padding: 5px 10px;
				border-radius: 3px;
				white-space: nowrap;
				font-size: 0.8em;
			}

			pre {
				background-color: #f4f4f4;
				padding: 15px;
				border-radius: 5px;
				overflow: auto;
				transition: background-color 0.3s;
			}

			code {
				font-size: 15px;
			}

			.dark-mode pre {
				background-color: #1e1e1e;
			}

			.description {
				margin-bottom: 5px;
				font-style: italic;
				color: #555;
			}

			.dark-mode .description {
				color: #bbb;
			}

			.copy-success {
				color: #4caf50 !important;
			}

			@media (max-width: 780px) {
				.sidebar {
					left: -200px; /* 隱藏側邊欄 */
				}
				.content {
					margin-left: 0;
					width: 100%;
				}
			}
		</style>
	</head>
	<body>
		<div class="sidebar">
			<a href="#page1">與硬體聯繫</a>
			<a href="#page2">設定setting</a>
			<a href="#page3">encoder模式</a>
			<a href="#page4">控制馬達轉動</a>
		</div>

		<div class="content">
			<button class="toggle-button" onclick="toggleDarkMode()">切換Dark Mode</button>

			<h1>FTC馬達篇 (Motors)</h1>
			<p>這裡是介紹馬達的各種code(Java)</p>

			<!-- - page1 與硬體聯繫 -->
			<h2 id="page1">與硬體(hardware)的聯繫</h2>
			<div class="code-block">
				<div class="description">創建一顆直流馬達物件(類似於建立變數)</div>
				<pre><code>DcMotorEx motor;</code></pre>
				<button class="copy-button" title="Copy"><i class="fa fa-copy"></i></button>
			</div>

			<div class="code-block">
				<div class="description">建立馬達(程式上)與硬體的聯繫</div>
				<pre><code>motor = hardwareMap.get(DcMotorEx.class, "motor");</code></pre>
				<button class="copy-button" title="Copy"><i class="fa fa-copy"></i></button>
			</div>

			<!-- - page2 設定setting -->
			<h2 id="page2">設定setting</h2>
			<div class="code-block">
				<div class="description">設定馬達正轉方向</div>
				<pre><code>motor.setDirection(DcMotorSimple.Direction.FORWARD);</code></pre>
				<button class="copy-button" title="Copy"><i class="fa fa-copy"></i></button>
			</div>

			<div class="code-block">
				<div class="description">設定馬達反轉方向</div>
				<pre><code>motor.setDirection(DcMotorSimple.Direction.REVERSE);</code></pre>
				<button class="copy-button" title="Copy"><i class="fa fa-copy"></i></button>
			</div>

			<div class="code-block">
				<div class="description">設定馬達煞車 (停止轉動時馬達鎖死)</div>
				<pre><code>motor.setZeroPowerBehavior(DcMotor.ZeroPowerBehavior.BRAKE);</code></pre>
				<button class="copy-button" title="Copy"><i class="fa fa-copy"></i></button>
			</div>

			<div class="code-block">
				<div class="description">設定馬達滑動 (停止轉動時馬達可轉動)</div>
				<pre><code>motor.setZeroPowerBehavior(DcMotor.ZeroPowerBehavior.FLOAT);</code></pre>
				<button class="copy-button" title="Copy"><i class="fa fa-copy"></i></button>
			</div>

			<!-- - page3 encoder模式 -->
			<h2 id="page3">encoder模式</h2>
			<div class="code-block">
				<div class="description">1. 重置馬達encoder (數值回歸0)</div>
				<pre><code>motor.setMode(DcMotor.RunMode.STOP_AND_RESET_ENCODER);</code></pre>
				<button class="copy-button" title="Copy"><i class="fa fa-copy"></i></button>
			</div>

			<div class="code-block">
				<div class="description">2. 用於單純量測馬達encoder</div>
				<pre><code>motor.setMode(DcMotor.RunMode.RUN_WITHOUT_ENCODER);</code></pre>
				<button class="copy-button" title="Copy"><i class="fa fa-copy"></i></button>
			</div>

			<div class="code-block">
				<div class="description">3. 設定馬達轉動模式為轉角度 // 而不是以數值驅動</div>
				<pre><code>motor.setMode(DcMotor.RunMode.RUN_TO_POSITION);</code></pre>
				<button class="copy-button" title="Copy"><i class="fa fa-copy"></i></button>
			</div>

			<div class="code-block">
				<div class="description">4. 希望馬達轉速較穩定</div>
				<pre><code>motor.setMode(DcMotor.RunMode.RUN_USING_ENCODER);</code></pre>
				<button class="copy-button" title="Copy"><i class="fa fa-copy"></i></button>
			</div>

			<!-- - page4 控制馬達轉動 -->
			<h2 id="page4">控制馬達轉動</h2>
			<div class="code-block">
				<div class="description">給定馬達power[-1, 1] (較常用)</div>
				<pre><code>motor.setPower();</code></pre>
				<button class="copy-button" title="Copy"><i class="fa fa-copy"></i></button>
			</div>

			<div class="code-block">
				<div class="description">給定馬達速度(常用於需要高精確度轉速的馬達，例如飛輪)</div>
				<pre><code>motor.setVelocity();</code></pre>
				<button class="copy-button" title="Copy"><i class="fa fa-copy"></i></button>
			</div>

			<div class="code-block">
				<div class="description">設定馬達目標轉動到的位置(用於手臂控制)</div>
				<pre><code>motor.setTargetPosition();</code></pre>
				<button class="copy-button" title="Copy"><i class="fa fa-copy"></i></button>
			</div>

			<div class="code-block">
				<div class="description">回傳馬達目前位置</div>
				<pre><code>motor.getCurrentPosition();</code></pre>
				<button class="copy-button" title="Copy"><i class="fa fa-copy"></i></button>
			</div>
		</div>

		<script>
			function toggleDarkMode() {
				document.body.classList.toggle("dark-mode");
			}

			document.querySelectorAll(".copy-button").forEach((button) => {
				button.addEventListener("click", () => {
					const codeBlock = button.previousElementSibling.querySelector("code");
					const codeText = codeBlock.innerText;

					navigator.clipboard
						.writeText(codeText)
						.then(() => {
							button.classList.add("copy-success");
							button.innerHTML = '<i class="fa fa-check"></i>';
							setTimeout(() => {
								button.classList.remove("copy-success");
								button.innerHTML = '<i class="fa fa-copy"></i>';
							}, 2000);
						})
						.catch((err) => {
							console.error("Failed to copy: ", err);
						});
				});
			});
		</script>
	</body>
</html>
